<div class="content">
    <h2 class="content-heading col-md-12">Send Email</h2>
    <div ui-view class="row">
        <div class="col-md-8 col-md-12">
            <div  class="block">
                <div class="block-header">
                    <h3 class="block-title">Send Custom Email</h3>
                </div>
                <div  class="block-content">
                    <form  class="form-horizontal" onsubmit="return false;">
                        <div class="form-group">
                            <div class="col-sm-12 col-xs-12">
                                <div class="form-material">
                                    <input class="form-control" ng-model="staticSubject" type="text" id="material-text2" name="material-text2">
                                    <label for="material-text2">Enter subject for mail</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-xs-12">
                                <!-- CKEditor Container -->
                                <textarea snaphy-ck-editor id="js-ckeditor" name="ckeditor"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-12">
                                <button ng-click="sendMail(null, staticSubject)" class="btn btn-minw btn-primary pull-right" type="button">Send Mail</button>
                            </div>
                        </div>
                    </form>
                    <!-- <button ng-click="getHtmlData()"></button> -->
                </div>
            </div>
            <!-- END CKEditor -->


            <div class="block" ng-repeat="(methodName, value) in mailSchema.templates">
                <div class="block-header">
                    <h3 class="block-title">{{value.label}}</h3>
                </div>
                <div  class="block-content block-content-full">
                    <form class="form-horizontal" name="formInfo" ng-validate="schema.validations" novalidate >
                        <div class="form-group">
                            <div class="col-sm-12 col-xs-12">
                                <div class="form-material">
                                    <input class="form-control" ng-model="value.mailValue.staticSubject" type="text" id="material-text2" name="material-text2">
                                    <label for="material-text2">Enter subject for mail</label>
                                </div>
                            </div>
                        </div>
                        <formly-form   model="value.mailValue" fields="value.properties">
                        </formly-form>
                        <div class="form-group">
                            <div class="col-md-12">
                                <button ng-click="sendMail(methodName, value.mailValue.staticSubject, value.mailValue)" class="btn btn-minw btn-primary pull-right" type="button">Send Mail</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- END CKEditor -->
        </div>



        <div class="col-md-4 col-md-12">
            <!-- Checkable Table-->
            <div class="block">
                <div class="block-header">
                    <h3 class="block-title">Select {{userLabel}}</h3>

                </div>
                <div class="block-content">
                    <!-- If you put a checkbox in thead section, it will automatically toggle all tbody section checkboxes -->
                    <table snaphy-checked-list class="js-table-checkable table table-hover">
                        <thead>
                            <tr>
                                <th class="text-center" style="width: 70px;">
                                    <label class="css-input css-checkbox css-checkbox-primary remove-margin-t remove-margin-b">
                                        <input ng-click="selectAllUser(users)"  type="checkbox" id="check-all" name="check-all"><span></span>
                                    </label>
                                </th>
                                <th>Select all </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="user in users">
                                <td class="text-center">
                                    <label class="css-input css-checkbox css-checkbox-primary">
                                        <input ng-click="toggleChecked(user)"  type="checkbox" id="row_1" name="row_1"><span></span>
                                    </label>
                                </td>
                                <td>
                                    <p class="font-w600 push-10">{{user.firstName}} {{user.lastName}}</p>
                                    <p class="text-muted remove-margin-b">{{user.email}}</p>
                                </td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- END Checkable Table -->
        </div>
    </div>
    <!-- div row -->

    <!-- SNAPHY DIALOG -->
    <snaphy-dialog message="{{dialog.message}}"
        table-title="{{dialog.title}}"
        on-cancel="dialog.onCancel()"
        on-confirm="dialog.onConfirm()"
        show-dialog="dialog.show">
    </snaphy-dialog>
</div>
